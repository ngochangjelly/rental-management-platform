const CACHE_NAME="rental-hub-v1",urlsToCache=["/","/dashboard.html","/login.html","/investor-management.html","/js/config.js","/js/dashboard-controller.js","/js/components/contract-analysis.js","/js/components/property-management.js","/js/components/tenant-management.js","/js/components/financial-reports.js","/js/components/toast/toast.js","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"];function doBackgroundSync(){console.log("Background sync triggered")}self.addEventListener("install",t=>{t.waitUntil(caches.open(CACHE_NAME).then(t=>(console.log("Opened cache"),t.addAll(urlsToCache))).catch(t=>{console.error("Failed to cache resources during install:",t)}))}),self.addEventListener("fetch",t=>{t.respondWith(caches.match(t.request).then(e=>{if(e)return e;const s=t.request.clone();return fetch(s).then(e=>{if(!e||200!==e.status||"basic"!==e.type)return e;const s=e.clone();return caches.open(CACHE_NAME).then(e=>{"GET"===t.request.method&&(t.request.url.startsWith("http://")||t.request.url.startsWith("https://")||t.request.url.startsWith("/"))&&e.put(t.request,s)}),e}).catch(()=>{if("document"===t.request.destination)return caches.match("/dashboard.html")})}))}),self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(t=>Promise.all(t.map(t=>{if(t!==CACHE_NAME)return console.log("Deleting old cache:",t),caches.delete(t)}))))}),self.addEventListener("sync",t=>{"background-sync"===t.tag&&t.waitUntil(doBackgroundSync())}),self.addEventListener("push",t=>{const e={body:t.data?t.data.text():"New notification from Rental Hub",icon:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><rect width="192" height="192" fill="%23667eea"/><path fill="white" d="M96 48L48 96h16v48h64V96h16L96 48zm0 16l32 32v40h-16v-16H80v16H64V96l32-32z"/></svg>',badge:'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 192"><rect width="192" height="192" fill="%23667eea"/><path fill="white" d="M96 48L48 96h16v48h64V96h16L96 48zm0 16l32 32v40h-16v-16H80v16H64V96l32-32z"/></svg>',vibrate:[100,50,100],data:{dateOfArrival:Date.now(),primaryKey:1}};t.waitUntil(self.registration.showNotification("Rental Hub",e))}),self.addEventListener("notificationclick",t=>{t.notification.close(),t.waitUntil(clients.openWindow("/dashboard.html"))});